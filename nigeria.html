<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nigeria - Civil Unrest in Africa</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e2b23;
      color: #f0f0f0;
      overflow-x: hidden;
      height: 100%;
    }

    .slide {
      position: relative;
      width: 100%;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
      padding-top: 100px;
      box-sizing: border-box;
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s ease-in-out;
    }

    .slide.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .content {
      display: flex;
      gap: 40px;
      max-width: 1200px;
      width: 100%;
      align-items: center;
      justify-content: space-between;
    }

    .text {
      flex: 0.6;
      font-size: 1.1rem;
      line-height: 1.6;
      color: #e8f5e9;
    }

    .visual {
      flex: 1.4;
      text-align: center;
      position: relative;
    }

    .map-container {
      position: relative;
      width: 100%;
      height: 500px;
      overflow: visible;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    #map {
      width: 100%;
      height: 100%;
      border-radius: 12px;
    }

    /* Enhanced Controls Styling - Compact Nigerian Style */
    .controls {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(15, 22, 17, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      border: 1px solid #3b6f52;
      z-index: 1000;
      max-width: 220px;
      color: #f0f0f0;
    }

    .controls-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      cursor: pointer;
      padding: 2px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
    }

    .controls-header:hover {
      background-color: rgba(59, 111, 82, 0.3);
    }

    .controls-title {
      font-size: 0.9rem;
      font-weight: bold;
      color: #b2dfdb;
    }

    .collapse-icon {
      font-size: 0.7rem;
      color: #81c784;
      transition: transform 0.3s ease;
    }

    .controls.collapsed .collapse-icon {
      transform: rotate(180deg);
    }

    .controls-content {
      transition: max-height 0.3s ease, opacity 0.3s ease;
      overflow: hidden;
    }

    .controls.collapsed .controls-content {
      max-height: 0;
      opacity: 0;
    }

    .filter-section {
      margin-bottom: 12px;
    }

    .filter-section h4 {
      margin: 0 0 8px 0;
      font-size: 0.9rem;
      font-weight: bold;
      color: #b2dfdb;
      border-bottom: 1px solid #3b6f52;
      padding-bottom: 4px;
    }

    .event-type-filters {
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: 120px;
      overflow-y: auto;
      padding-right: 3px;
    }

    .event-type-filters::-webkit-scrollbar {
      width: 4px;
    }

    .event-type-filters::-webkit-scrollbar-track {
      background: #2e4734;
      border-radius: 2px;
    }

    .event-type-filters::-webkit-scrollbar-thumb {
      background: #4caf50;
      border-radius: 2px;
    }

    .event-type-filters label {
      display: flex;
      align-items: center;
      font-size: 0.75rem;
      cursor: pointer;
      padding: 2px 4px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
      color: #e8f5e9;
    }

    .event-type-filters label:hover {
      background-color: rgba(59, 111, 82, 0.3);
    }

    .event-type-filters input[type="checkbox"] {
      margin-right: 6px;
      width: 12px;
      height: 12px;
      accent-color: #4caf50;
    }

    .date-info {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .current-date {
      text-align: center;
      font-weight: bold;
      font-size: 0.8rem;
      color: #b2dfdb;
      background-color: rgba(46, 71, 52, 0.5);
      padding: 6px;
      border-radius: 4px;
    }

    .event-count {
      text-align: center;
      font-size: 0.75rem;
      color: #81c784;
      margin-top: 8px;
      font-weight: bold;
      background-color: rgba(46, 71, 52, 0.3);
      padding: 6px;
      border-radius: 4px;
    }

    /* Map Legend */
    .map-legend {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: rgba(15, 22, 17, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #3b6f52;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      z-index: 1000;
      max-width: 200px;
    }

    .legend-title {
      font-size: 0.9rem;
      font-weight: bold;
      color: #b2dfdb;
      margin-bottom: 10px;
      border-bottom: 1px solid #3b6f52;
      padding-bottom: 6px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
      padding: 2px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
    }

    .legend-item:hover {
      background-color: rgba(59, 111, 82, 0.3);
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.3);
    }

    .legend-label {
      font-size: 0.75rem;
      color: #e8f5e9;
    }

    /* MATCHING INDEX.HTML NAVIGATION STYLES */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
      background: linear-gradient(135deg, #2a4d3a, #1e3829);
      padding: 15px 0;
      border-bottom: 2px solid #4caf50;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      width: 100%;
    }

    .nav-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .nav-title {
      font-size: 1.8rem;
      font-weight: bold;
      color: #b2dfdb;
      margin-right: 25px;
      font-family: 'Georgia', serif;
      letter-spacing: 0.5px;
    }

    .nav-button-header {
      background-color: #2e4734;
      color: #f0f0f0;
      padding: 8px 16px;
      border: 1px solid #3b6f52;
      border-radius: 4px;
      font-size: 0.95rem;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .nav-button-header:hover {
      background-color: #3b6f52;
      border-color: #4caf50;
    }

    .nav-controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    select {
      padding: 8px 12px;
      background-color: #2e4734;
      color: #f0f0f0;
      border: 1px solid #3b6f52;
      border-radius: 4px;
      font-size: 0.95rem;
      cursor: pointer;
    }

    select:hover {
      border-color: #4caf50;
    }

    footer {
      position: relative;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #0f1611;
      color: #a0a0a0;
      padding: 15px 20px;
      z-index: 998;
      font-size: 0.9rem;
      border-top: 1px solid #2e4734;
      margin-top: 40px;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-sources {
      color: #b0b0b0;
    }

    .footer-authors {
      color: #b0b0b0;
      font-style: italic;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #b2dfdb;
      text-align: center;
    }

    h2 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: #b2dfdb;
    }

    h3 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: #81c784;
    }

    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .stat-box {
      background-color: #2e4734;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #ff6b6b;
      text-align: center;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: #ff6b6b;
    }

    .stat-label {
      font-size: 1rem;
      color: #b0b0b0;
      margin-top: 5px;
    }

    .timeline-container {
      background: linear-gradient(135deg, #2e4734, #1e3829);
      padding: 30px;
      border-radius: 12px;
      border: 2px solid #ff6b6b;
      position: relative;
      overflow: hidden;
    }

    .timeline-item {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      position: relative;
    }

    .timeline-date {
      background-color: #ff6b6b;
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 0.9rem;
      min-width: 100px;
      text-align: center;
      margin-right: 20px;
    }

    .timeline-content {
      flex: 1;
      background-color: rgba(46, 71, 52, 0.3);
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #ff6b6b;
    }

    .nigeria-snapshot {
      background: #1a2e1d;
      padding: 25px;
      border-radius: 15px;
      border: 3px dashed #ff6b6b;
      position: relative;
      font-family: 'Georgia', serif;
    }

    .text-highlight {
      background: linear-gradient(135deg, #2e4734, #1e3829);
      padding: 30px;
      border-radius: 12px;
      border: 2px solid #ff6b6b;
      text-align: center;
    }

    .highlight-header {
      font-size: 1.4rem;
      color: #ff6b6b;
      font-weight: bold;
      margin-bottom: 25px;
      border-bottom: 2px solid #ff6b6b;
      padding-bottom: 15px;
    }

    .key-phrase {
      background: rgba(255, 107, 107, 0.15);
      border: 1px solid rgba(255, 107, 107, 0.3);
      padding: 20px;
      margin: 15px 0;
      border-radius: 8px;
      font-size: 1.1rem;
      line-height: 1.5;
      color: #e8f5e9;
    }

    .key-phrase strong {
      color: #ff6b6b;
      font-weight: bold;
    }

    .constitutional-note {
      font-style: italic;
      color: #b0b0b0;
      font-size: 0.95rem;
      margin-top: 20px;
      padding: 15px;
      background: rgba(46, 71, 52, 0.3);
      border-radius: 6px;
      border-left: 4px solid #ff6b6b;
    }

    .snapshot-header {
      text-align: center;
      margin-bottom: 25px;
      position: relative;
    }

    .snapshot-title {
      background: #ff6b6b;
      color: white;
      padding: 8px 20px;
      border-radius: 25px;
      font-size: 1.1rem;
      font-weight: bold;
      display: inline-block;
      transform: rotate(-2deg);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .impact-bubbles {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: space-around;
      margin: 20px 0;
    }

    .bubble {
      background: rgba(255, 107, 107, 0.15);
      border: 2px solid #ff6b6b;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      transform: rotate(3deg);
      transition: all 0.3s ease;
      position: relative;
    }

    .bubble:nth-child(2) { transform: rotate(-4deg); }
    .bubble:nth-child(3) { transform: rotate(1deg); }
    .bubble:nth-child(4) { transform: rotate(-2deg); }

    .bubble:hover {
      transform: scale(1.1) rotate(0deg);
      background: rgba(255, 107, 107, 0.25);
    }

    .bubble-icon {
      font-size: 1.5rem;
      margin-bottom: 5px;
      font-weight: bold;
      color: #ff6b6b;
    }

    .bubble-text {
      font-size: 0.8rem;
      color: #e8f5e9;
      font-weight: bold;
    }

    .crisis-note {
      background: #ff6b6b;
      color: white;
      padding: 12px;
      border-radius: 8px;
      margin-top: 20px;
      font-style: italic;
      text-align: center;
      transform: rotate(-1deg);
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    .references {
      margin-top: 30px;
      padding: 20px;
      background-color: #243329;
      border-radius: 8px;
    }

    .references h3 {
      color: #81c784;
      margin-bottom: 15px;
    }

    @media (max-width: 768px) {
      .content {
        flex-direction: column;
      }
      .text, .visual {
        width: 100%;
      }
      .visual {
        margin-top: 20px;
      }
      
      nav {
        padding: 12px 0;
      }

      .nav-content {
        flex-direction: column;
        gap: 10px;
        padding: 0 15px;
      }
      
      .nav-title {
        margin-right: 0;
        margin-bottom: 8px;
        font-size: 1.4rem;
      }

      .nav-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .slide {
        padding-top: 140px;
      }

      footer {
        padding: 12px 15px;
        font-size: 0.8rem;
      }

      .footer-content {
        flex-direction: column;
        gap: 8px;
        text-align: center;
      }

      .map-container {
        height: 300px;
      }

      .controls,
      .map-legend {
        position: static;
        margin: 8px;
        max-width: none;
        bottom: auto;
        left: auto;
        right: auto;
        top: auto;
      }

      .timeline-container,
      .nigeria-snapshot,
      .text-highlight {
        padding: 20px;
        margin: 10px 0;
      }

      .timeline-item {
        flex-direction: column;
        text-align: center;
        margin-bottom: 15px;
      }

      .timeline-date {
        margin-bottom: 10px;
        margin-right: 0;
      }

      .impact-bubbles {
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .bubble {
        width: 100px;
        height: 100px;
        transform: none !important;
      }

      .key-phrase {
        font-size: 1rem;
        padding: 15px;
      }

      .highlight-header {
        font-size: 1.2rem;
      }
    }

    /* Enhanced Leaflet popup styling */
    .leaflet-popup-content-wrapper {
      background-color: rgba(15, 22, 17, 0.95);
      color: #f0f0f0;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      max-width: 300px !important;
      min-width: 200px !important;
    }

    .leaflet-popup-content h4 {
      color: #b2dfdb;
      margin-top: 0;
      margin-bottom: 8px;
    }

    .leaflet-popup-content p {
      margin: 4px 0;
      line-height: 1.4;
    }

    .leaflet-popup-tip {
      background-color: rgba(15, 22, 17, 0.95);
    }

    .leaflet-popup-close-button {
      color: #b2dfdb !important;
      font-size: 18px !important;
      padding: 4px 8px !important;
    }

    .leaflet-popup-close-button:hover {
      color: #ffffff !important;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="nav-content">
        <div class="nav-title">Civil Unrest in Africa</div>
        <div class="nav-controls">
          <a class="nav-button-header" href="index.html">Home</a>
          <select onchange="navigateToSection(this.value);">
            <option value="">Select Country</option>
            <option value="nigeria" selected>Nigeria</option>
            <option value="ghana">Ghana</option>
            <option value="senegal">Senegal</option>
          </select>
          <button class="nav-button-header" onclick="navigateToSection('full_map')">Full Map</button>
        </div>
      </div>
    </nav>
  </header>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h1>Nigeria</h1>
        <p>Nigeria, Africa's most populous nation and largest economy, has long been viewed as a regional powerhouse with significant democratic potential. However, in 2024, the country grappled with escalating political tensions, widespread civil unrest, and economic instability. These developments tested the resilience of Nigeria's democratic institutions and underscored the complexities of governance in a diverse and dynamic society.</p>
      </div>
      <div class="visual">
        <div class="map-container">
          <div id="map"></div>
          
          <!-- Enhanced Controls Panel -->
          <div class="controls" id="controlsPanel">
            <div class="controls-header" onclick="toggleControls()">
              <div class="controls-title">Filters & Info</div>
              <div class="collapse-icon">▼</div>
            </div>
            <div class="controls-content">
              <div class="filter-section">
                <h4>Event Types</h4>
                <div class="event-type-filters" id="eventTypeFilters">
                  <!-- Event type checkboxes will be populated here -->
                </div>
              </div>
              
              <div class="filter-section">
                <h4>Date Range</h4>
                <div class="date-info">
                  <div class="current-date" id="currentDateRange">June 2024 - March 21, 2025</div>
                </div>
              </div>
              
              <div class="event-count" id="eventCount">Loading events...</div>
            </div>
          </div>

          <!-- Map Legend -->
          <div class="map-legend">
            <div class="legend-title">Event Types</div>
            <div id="legendContent">
              <!-- Legend items will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h2>Democracy and Political Competition</h2>
        <p>The 2023 general elections, which brought President Bola Tinubu to power, were marred by significant violence and irregularities. Independent observers reported over 100 election-related deaths, with numerous polling stations affected by disruptions, leading to the disenfranchisement of more than 1.1 million voters.</p>
        <p>Post-election, the political climate remained tense. Ethnic and regional divisions deepened, particularly between supporters of Tinubu and those of opposition leader Peter Obi. These tensions were exacerbated by inflammatory rhetoric and incidents of communal violence, highlighting the fragility of Nigeria's democratic cohesion.</p>
      </div>
      <div class="visual">
        <div class="timeline-container">
          <div class="timeline-item">
            <div class="timeline-date">Feb 2023</div>
            <div class="timeline-content">
              <strong>Presidential Elections</strong><br>
              Bola Tinubu wins amid violence and irregularities
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-date">Election Day</div>
            <div class="timeline-content">
              <strong>100+ Deaths Reported</strong><br>
              Violence at polling stations across multiple states
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-date">Post-Election</div>
            <div class="timeline-content">
              <strong>1.1M Voters Disenfranchised</strong><br>
              Disrupted polling stations prevent voting
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-date">2023-2024</div>
            <div class="timeline-content">
              <strong>Rising Tensions</strong><br>
              Ethnic divisions deepen between political supporters
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h2>Civil Unrest and Protests</h2>
        <p>In 2024, Nigeria witnessed a surge in civil unrest, primarily driven by economic grievances. The removal of fuel subsidies and the devaluation of the Naira led to soaring inflation, triggering widespread protests under the banner #EndBadGovernance. These demonstrations, which began in July, were met with a heavy-handed response from security forces, resulting in at least 21 deaths and over 1,100 arrests on the first day alone.</p>
        <p>Additionally, a general strike initiated by the Nigeria Labour Congress and the Trade Union Congress in May paralyzed the nation for over a month. The strike, demanding a substantial increase in the minimum wage, led to the shutdown of essential services, including electricity and transportation, before a compromise was reached in July.</p>
      </div>
      <div class="visual">
        <div class="stats-container">
          <div class="stat-box">
            <div class="stat-number">21</div>
            <div class="stat-label">Deaths on first day of protests</div>
          </div>
          <div class="stat-box">
            <div class="stat-number">1,100+</div>
            <div class="stat-label">Arrests on first day</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h2>Consequences of Political Instability</h2>
        <p>The convergence of political unrest and economic hardship has had significant consequences for Nigeria's development. Investor confidence has waned, inflation has eroded purchasing power, and public trust in governmental institutions has diminished. The government's perceived inability to address these challenges effectively has further fueled public dissent and calls for reform.</p>
      </div>
      <div class="visual">
        <div class="nigeria-snapshot">
          <div class="snapshot-header">
            <div class="snapshot-title">Nigeria 2024: The Ripple Effect</div>
          </div>
          
          <div class="impact-bubbles">
            <div class="bubble">
              <div class="bubble-icon">$</div>
              <div class="bubble-text">Foreign investors fleeing</div>
            </div>
            
            <div class="bubble">
              <div class="bubble-icon">₦</div>
              <div class="bubble-text">Naira crashes hard</div>
            </div>
            
            <div class="bubble">
              <div class="bubble-icon">!</div>
              <div class="bubble-text">Projects stalled</div>
            </div>
            
            <div class="bubble">
              <div class="bubble-icon">?</div>
              <div class="bubble-text">Trust eroding</div>
            </div>
          </div>
          
          <div style="margin-top: 20px; text-align: left; font-size: 0.9rem; color: #b0b0b0;">
            → The cycle: Political instability → Economic uncertainty → Social unrest → More instability
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h2>The Right to Protest and Government Response</h2>
        <p>While the Nigerian constitution guarantees the right to peaceful assembly, the government's response to protests in 2024 raised serious human rights concerns. Security forces were reported to have used excessive force, including live ammunition, against demonstrators. Journalists covering the protests faced harassment and detention, and numerous activists were arrested without due process.</p>
      </div>
      <div class="visual">
        <div class="text-highlight">
          <div class="highlight-header">Government Response to Protests</div>
          
          <div class="key-phrase">
            Security forces were reported to have used <strong>excessive force, including live ammunition</strong>, against demonstrators.
          </div>
          
          <div class="key-phrase">
            <strong>Journalists covering the protests</strong> faced harassment and detention.
          </div>
          
          <div class="key-phrase">
            Numerous activists were <strong>arrested without due process</strong>.
          </div>
          
          <div class="constitutional-note">
            Despite constitutional guarantees of the right to peaceful assembly, the 2024 protests revealed serious human rights concerns.
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="slide">
    <div class="content">
      <div class="text">
        <h2>Conclusion</h2>
        <p>Nigeria's democratic trajectory in 2024 was marked by considerable strain, including political polarization and economic crises. Addressing these issues requires comprehensive reforms focused on strengthening democratic institutions, promoting inclusive governance, and ensuring the protection of civil liberties. Only through such measures can Nigeria move toward lasting stability and democratic consolidation.</p>
        
        <div class="references">
          <h3>References</h3>
          <div style="padding-left: 0;">
            <div style="margin-bottom: 8px; color: #c8e6c9;">allAfrica.com - Nigeria's 2023 elections violence</div>
            <div style="margin-bottom: 8px; color: #c8e6c9;">Crisis Group - Calming Tensions amid Nigeria's Post-election Controversy</div>
            <div style="margin-bottom: 8px; color: #c8e6c9;">Wikipedia - 2024 Nigerian protests (#EndBadGovernance)</div>
            <div style="margin-bottom: 8px; color: #c8e6c9;">Wikipedia - 2024 Nigerian general strike</div>
            <div style="margin-bottom: 8px; color: #c8e6c9;">Reuters - Nigerian police shot at protesters in August, Amnesty says; International IDEA - Nigeria: August 2024 Report</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-content">
      <div class="footer-sources">
        Sources: ACLED Dataset, African Democratic Progress Reports, allAfrica.com, Crisis Group, Reuters, Amnesty International
      </div>
      <div class="footer-authors">
        Created by: Emiel, Matteo, Radhika, Yvonne
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script>
    // Intersection Observer for scroll animations
    const slides = document.querySelectorAll('.slide');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.3
    });

    slides.forEach(slide => {
      observer.observe(slide);
    });

    // Navigation functions
    function navigateToSection(section) {
      if (section === 'ghana') {
        window.location.href = 'ghana.html';
      } else if (section === 'senegal') {
        window.location.href = 'senegal.html';
      } else if (section === 'full_map') {
        window.location.href = 'full_map.html';
      }
    }

    function toggleControls() {
      const controlsPanel = document.getElementById('controlsPanel');
      controlsPanel.classList.toggle('collapsed');
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      // Make first slide visible immediately
      if (slides.length > 0) {
        slides[0].classList.add('visible');
      }
    });

    // Initialize Leaflet map centered on Nigeria
    const map = L.map('map').setView([9.0820, 8.6753], 6);
    
    // Add dark tile layer to match website theme
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '© OpenStreetMap contributors © CARTO',
      maxZoom: 18,
      minZoom: 5
    }).addTo(map);
    
    // Much more expanded Nigeria bounds with extensive space for popups
    const southWest = L.latLng(-5.0, -5.0); // Extended much further south and west
    const northEast = L.latLng(25.0, 25.0); // Extended much further north and east
    const bounds = L.latLngBounds(southWest, northEast);
    map.setMaxBounds(bounds);
    
    // Variables for data and filters
    let eventsData = null;
    let eventsLayer = null;
    let eventTypes = new Set();
    let selectedEventTypes = new Set();
    
    // Fixed date range: June 2024 to March 21, 2025
    const fixedDateRange = {
      min: new Date(2024, 5, 1), // June 1, 2024 (month is 0-indexed)
      max: new Date(2025, 2, 21) // March 21, 2025
    };
    
    // Enhanced color mapping for different event types
    const eventTypeColors = {
      'Protests': '#f7f247',
      'Violence against civilians': '#dc3545',
      'Battles': '#6f42c1',
      'Riots': '#fd7e14',
      'Strategic developments': '#20c997',
      'Explosions/Remote violence': '#e83e8c',
      'default': '#6c757d'
    };
    
    function getEventColor(eventType) {
      return eventTypeColors[eventType] || eventTypeColors['default'];
    }
    
    function parseDate(dateString) {
      if (!dateString) return null;
      
      let date = new Date(dateString);
      if (!isNaN(date.getTime())) return date;
      
      const parts = dateString.split(/[-\/]/);
      if (parts.length === 3) {
        date = new Date(parts[2], parts[1] - 1, parts[0]);
        if (!isNaN(date.getTime())) return date;
        
        date = new Date(parts[2], parts[0] - 1, parts[1]);
        if (!isNaN(date.getTime())) return date;
      }
      
      return null;
    }
    
    function createEventTypeFilters() {
      const container = document.getElementById('eventTypeFilters');
      const legendContainer = document.getElementById('legendContent');
      container.innerHTML = '';
      legendContainer.innerHTML = '';
      
      // Add "Select All" option
      const selectAllDiv = document.createElement('div');
      selectAllDiv.innerHTML = '<label><input type="checkbox" id="selectAll" checked><strong>Select All</strong></label>';
      container.appendChild(selectAllDiv);
      
      document.getElementById('selectAll').addEventListener('change', function() {
        const checkboxes = container.querySelectorAll('input[type="checkbox"]:not(#selectAll)');
        checkboxes.forEach(cb => {
          cb.checked = this.checked;
          if (this.checked) {
            selectedEventTypes.add(cb.value);
          } else {
            selectedEventTypes.delete(cb.value);
          }
        });
        filterEvents();
      });
      
      // Add individual event type filters and legend items
      Array.from(eventTypes).sort().forEach(eventType => {
        const color = getEventColor(eventType);
        
        // Add filter checkbox
        const filterDiv = document.createElement('div');
        filterDiv.innerHTML = `
          <label>
            <input type="checkbox" value="${eventType}" checked>
            <span style="display: inline-block; width: 12px; height: 12px; background-color: ${color}; border-radius: 50%; margin-right: 5px;"></span>
            ${eventType}
          </label>
        `;
        container.appendChild(filterDiv);
        
        // Add legend item
        const legendDiv = document.createElement('div');
        legendDiv.className = 'legend-item';
        legendDiv.innerHTML = `
          <div class="legend-color" style="background-color: ${color};"></div>
          <div class="legend-label">${eventType}</div>
        `;
        legendContainer.appendChild(legendDiv);
        
        const checkbox = filterDiv.querySelector('input');
        checkbox.addEventListener('change', function() {
          if (this.checked) {
            selectedEventTypes.add(this.value);
          } else {
            selectedEventTypes.delete(this.value);
            document.getElementById('selectAll').checked = false;
          }
          
          // Update "Select All" state
          const allCheckboxes = container.querySelectorAll('input[type="checkbox"]:not(#selectAll)');
          const checkedCheckboxes = container.querySelectorAll('input[type="checkbox"]:not(#selectAll):checked');
          document.getElementById('selectAll').checked = allCheckboxes.length === checkedCheckboxes.length;
          
          filterEvents();
        });
        
        selectedEventTypes.add(eventType);
      });
    }
    
    function filterEvents() {
      if (!eventsData || !eventsLayer) return;
      
      let visibleCount = 0;
      
      eventsLayer.eachLayer(function(layer) {
        const feature = layer.feature;
        const eventType = feature.properties.event_type || feature.properties.sub_event_type || 'Unknown';
        const eventDate = parseDate(feature.properties.event_date || feature.properties.date);
        
        let showEvent = true;
        
        // Filter by event type
        if (!selectedEventTypes.has(eventType)) {
          showEvent = false;
        }
        
        // Filter by fixed date range
        if (eventDate) {
          if (eventDate < fixedDateRange.min || eventDate > fixedDateRange.max) {
            showEvent = false;
          }
        }
        
        if (showEvent) {
          layer.addTo(map);
          visibleCount++;
        } else {
          map.removeLayer(layer);
        }
      });
      
      document.getElementById('eventCount').textContent = `Showing ${visibleCount} events`;
    }

    async function loadEventsData() {
      // Your GitHub raw URL
      const githubUrl = 'https://raw.githubusercontent.com/Redrum13/democracy_project/780d82e9744b5f58e3e4b1a6e79d268757eb40ce/events_africa1.geojson';
      
      try {
        console.log('Loading GeoJSON from GitHub...');
        const response = await fetch(githubUrl);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const allEventsData = await response.json();
        
        // Filter for Nigeria only
        eventsData = {
          type: "FeatureCollection",
          features: allEventsData.features.filter(feature => {
            const country = feature.properties.country || feature.properties.COUNTRY || '';
            const iso3 = feature.properties.iso3 || feature.properties.ISO3 || '';
            return country.toLowerCase() === 'nigeria' || iso3.toUpperCase() === 'NGA';
          })
        };
        
        console.log('Successfully loaded', eventsData.features.length, 'Nigeria events from GitHub');
        
        // Extract event types
        eventsData.features.forEach(feature => {
          const eventType = feature.properties.event_type || feature.properties.sub_event_type || 'Unknown';
          eventTypes.add(eventType);
        });
        
        // Create filters and legend
        createEventTypeFilters();
        
        // Add events to map
        eventsLayer = L.geoJSON(eventsData, {
          pointToLayer: function (feature, latlng) {
            const eventType = feature.properties.event_type || feature.properties.sub_event_type || 'Unknown';
            const color = getEventColor(eventType);
            
            return L.circleMarker(latlng, {
              radius: 6,
              fillColor: color,
              color: color,
              weight: 1,
              opacity: 0.8,
              fillOpacity: 0.7
            });
          },
          onEachFeature: function (feature, layer) {
            let popupContent = '<div>';
            
            if (feature.properties.event_date || feature.properties.date) {
              popupContent += `<h4>${feature.properties.event_date || feature.properties.date}</h4>`;
            }
            
            if (feature.properties.event_type || feature.properties.sub_event_type) {
              popupContent += `<p><strong>Type:</strong> ${feature.properties.event_type || feature.properties.sub_event_type}</p>`;
            }
            
            if (feature.properties.location || feature.properties.admin1 || feature.properties.admin2) {
              const location = feature.properties.location || 
                             [feature.properties.admin2, feature.properties.admin1].filter(Boolean).join(', ');
              popupContent += `<p><strong>Location:</strong> ${location}</p>`;
            }
            
            if (feature.properties.notes || feature.properties.notes_description) {
              popupContent += `<p>${feature.properties.notes || feature.properties.notes_description}</p>`;
            }
            
            if (feature.properties.fatalities) {
              popupContent += `<p><strong>Fatalities:</strong> ${feature.properties.fatalities}</p>`;
            }
            
            popupContent += '</div>';
            
            // Enhanced popup options to prevent cut-off issues - No snap back
            layer.bindPopup(popupContent, {
              maxWidth: 300,
              minWidth: 200,
              autoPan: false, // Disabled to prevent snap back
              keepInView: false, // Disabled to prevent snap back
              closeButton: true,
              autoClose: false,
              className: 'custom-popup',
              offset: [0, -10] // Small offset to avoid overlapping marker
            });
            
            layer.on('mouseover', function(e) {
              this.setStyle({
                radius: 8,
                fillOpacity: 1
              });
            });
            
            layer.on('mouseout', function(e) {
              this.setStyle({
                radius: 6,
                fillOpacity: 0.7
              });
            });
          }
        }).addTo(map);
        
        // Apply initial filter
        filterEvents();
        
      } catch (error) {
        console.error('Error loading events data from GitHub:', error);
        document.getElementById('eventCount').textContent = 'Error loading events - check GitHub URL';
      }
    }

    // Load data when page loads
    loadEventsData();
  </script>
</body>
</html>